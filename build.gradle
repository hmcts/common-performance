plugins {
    id 'org.owasp.dependencycheck' version '9.0.4'
    id 'scala'
    id 'java-library'
}

dependencyCheck {
    suppressionFile = "owasp-suppressions.xml"
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'io.gatling:gatling-core:3.9.5'
    implementation 'org.scala-lang:scala-library:2.13.10'
    implementation 'com.google.code.gson:gson:2.10.1'
    testImplementation 'org.scalatest:scalatest_2.13:3.2.17'
}

task scalaTest(type: JavaExec) {
    group = "verification"
    description = "Runs ScalaTest tests using the ScalaTest runner"

    classpath = sourceSets.test.runtimeClasspath
    mainClass.set("org.scalatest.tools.Runner")

    args = [
            "-R", "build/classes/scala/test",
            "-oD"
    ]
}
